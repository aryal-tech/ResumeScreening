{% extends "base.html" %}
{% block title %}Results | Resume Screener{% endblock %}
{% block content %}
<h2>Processed Resumes</h2>

<!-- === Top-N + Home toolbar (number input) === -->
<div id="results-toolbar" class="mb-3" style="display:flex;gap:.75rem;align-items:center;">
  <label for="topCount" style="font-weight:600;">Show top</label>
  <input id="topCount" type="number" min="1" step="1"
         value="{{ selected_top or 10 }}"
         class="border rounded px-2 py-1" style="width: 6rem;">
  <span style="opacity:.7;">by S.N</span>

  <span id="topStatus" class="text-sm" style="margin-left:.5rem;opacity:.75;"></span>

  <button type="button" id="btn-home" class="btn" style="margin-left:auto;">
    Go to Home
  </button>
</div>

{% if errors and errors|length %}
  <div class="errors">
    <h4>Errors</h4>
    <ul>
      {% for e in errors %}<li>{{ e }}</li>{% endfor %}
    </ul>
  </div>
{% endif %}

<table class="results-table">
  <thead>
    <tr>
      <th>S.N</th>
      <th>Resume Name</th>
      <th>Email</th>
      <th>Duplicate Resume</th>
      <th>Similarity (0–1)</th>
    </tr>
  </thead>
  <tbody id="resumeRows">
    {% for r in results %}
    <tr>
      <td>{{ r.sn }}</td>
      <td>
        <a href="#" class="resume-link" data-filename="{{ r.name }}">{{ r.name }}</a>
      </td>
      <td>{{ r.email or '' }}</td>
      <td>{{ r.duplicate or '—' }}</td>
      <td>
        {% if r.score is not none %}
          {{ '%.2f' % r.score }}
        {% else %}
          — 
        {% endif %}
      </td>
    </tr>
    {% endfor %}
  </tbody>
</table>

{% if not results %}
<p>No results to display. Go to
  <a href="{{ url_for('actual_calculation') }}">Actual Calculation</a> to run screening.</p>
{% endif %}
{% endblock %}
